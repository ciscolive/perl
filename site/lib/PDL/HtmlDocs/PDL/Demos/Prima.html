<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>PDL::Demos::Prima - PDL demo for PDL::Graphics::Prima</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:WENWU@mojo.(none)" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a>
    <ul>
      <li><a href="#use-PDL::Graphics::Prima::Simple">use PDL::Graphics::Prima::Simple</a></li>
      <li><a href="#More-than-just-lines">More than just lines!</a></li>
      <li><a href="#Mouse-Interaction">Mouse Interaction</a></li>
      <li><a href="#Multiple-plots-without-blocking">Multiple plots without blocking</a></li>
      <li><a href="#Adding-a-title-and-axis-labels">Adding a title and axis labels</a></li>
      <li><a href="#Saving-to-a-file">Saving to a file</a></li>
      <li><a href="#Adding-additional-data-to-the-plot">Adding additional data to the plot</a></li>
      <li><a href="#The-plot-command">The plot command</a></li>
      <li><a href="#Enjoy-PDL::Graphics::Prima">Enjoy PDL::Graphics::Prima!</a></li>
    </ul>
  </li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#LICENSE-AND-COPYRIGHT">LICENSE AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>PDL::Demos::Prima - PDL demo for PDL::Graphics::Prima</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>You can enjoy this demo in any number of ways. First, you can invoke the demo from the command line by saying</p>

<pre><code> perl -MPDL::Demos::Prima</code></pre>

<p>Second, you can invoke the demo from with the pdl shell by saying</p>

<pre><code> pdl&gt; demo prima</code></pre>

<p>Finally, all of the content is in the pod documentation, so you can simply read this, though it won&#39;t be quite so interactive. :-)</p>

<pre><code> perldoc PDL::Demos::Prima
 podview PDL::Demos::Prima</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>The documentation in this module is meant to give a short, hands-on introduction to <a>PDL::Graphics::Prima</a>, a plotting library written on top of the <a href="./Prima.html#">Prima</a> GUI toolkit.</p>

<h2 id="use-PDL::Graphics::Prima::Simple">use PDL::Graphics::Prima::Simple</h2>

<p>To get started, you will want to use <a>PDL::Graphics::Prima::Simple</a>. This module provides a set of friendly wrappers for simple, first-cut data visualization. <a>PDL::Graphics::Prima</a>, the underlying library, is a general-purpose 2D plotting library built as a widget in the <a href="./Prima.html#">Prima GUI toolkit</a>, but we don&#39;t need the full functionality for the purposes of this demo.</p>

<pre><code> use PDL::Graphics::Prima::Simple;
 my $x = sequence(100)/10;
 line_plot($x, $x-&gt;sin);</code></pre>

<h2 id="More-than-just-lines">More than just lines!</h2>

<p>In addition to numerous ways to plot x/y data, you can also plot distributions and images. The best run-down of the simple plotting routines can be found in <a>the Synopsis for PDL::Graphics::Prima::Simple</a>.</p>

<pre><code> $distribution = grandom(100);
 hist_plot($distribution);
 
 $x = sequence(100)/10;
 cross_plot($x, $x-&gt;sin);
 
 $image = rvals(100, 100);
 matrix_plot($image);</code></pre>

<h2 id="Mouse-Interaction">Mouse Interaction</h2>

<p>Plots allow for <a>mouse interaction</a>, herein referred to as twiddling. You can resize the window, zoom with the scroll wheel, or click and drag the canvas around. There is also a right-click zoom-rectangle, and a right-click context menu.</p>

<pre><code> hist_plot(grandom(100));
 
 # Run this, then try using your mouse</code></pre>

<p>In your Perl scripts, and in the PDL shell for some operating systems and some versions of <a>Term::ReadLine</a>, twiddling will cause your script to pause when you create a new plot. To resume your script or return execution to the shell, either close the window or press &#39;q&#39;.</p>

<pre><code> # If your PDL shell supports simultaneous
 # input and plot interaction, running this
 # should display both plots simultaneously:
 
 $x = sequence(100)/10;
 cross_plot($x, $x-&gt;sin);
 line_plot($x, $x-&gt;cos);</code></pre>

<h2 id="Multiple-plots-without-blocking">Multiple plots without blocking</h2>

<p>The blocking behavior just discussed is due to what is called autotwiddling. To turn this off, simply send a boolean false value to auto_twiddle. Then, be sure to invoke twiddling when you&#39;re done creating your plots.</p>

<pre><code> auto_twiddle(0);
 hist_plot(grandom(100));
 matrix_plot(rvals(100, 100));
 twiddle();</code></pre>

<p>Once turned off, autotwiddling will remain off until you turn it back on.</p>

<pre><code> # autotwiddling still off
 hist_plot(grandom(100));
 matrix_plot(rvals(100, 100));
 twiddle();</code></pre>

<h2 id="Adding-a-title-and-axis-labels">Adding a title and axis labels</h2>

<p>Functions like <a>hist_plot</a>, <a>cross_plot</a>, and <a>matrix_plot</a> actually create and return plot objects which you can subsequently modify. For example, adding a title and axis labels are pretty easy. For titles, you call the <a>title method on the plot object</a>. For axis labels, you call the <a>label method on the axis objects</a>.</p>

<pre><code> # Make sure autotwiddling is off in your script
 auto_twiddle(0);
 
 # Build the plot
 my $x = sequence(100)/10;
 my $plot = line_plot($x, $x-&gt;sin);
 
 # Add the title and labels
 $plot-&gt;title(&#39;Harmonic Oscillator&#39;);
 $plot-&gt;x-&gt;label(&#39;Time [s]&#39;);
 $plot-&gt;y-&gt;label(&#39;Displacement [cm]&#39;);
 
 # Manually twiddle once everything is finished
 twiddle();</code></pre>

<h2 id="Saving-to-a-file">Saving to a file</h2>

<p><a>PDL::Graphics::Prima::Simple</a> excels at user interaction, but you can save your plots to a file using <a>save_to_file</a> or <a>save_to_postscript</a> methods, or by right-clicking and selecting the appropriate menu option.</p>

<pre><code> auto_twiddle(0);
 $x = sequence(100)/10;
 line_plot($x, $x-&gt;sin)-&gt;save_to_postscript;
 
 # You can supply a filename to the method if you like.
 # Also available is save_to_file, which saves to raster
 # file formats. Expect save_to_postscript to be merged
 # into save_to_file in the future.</code></pre>

<h2 id="Adding-additional-data-to-the-plot">Adding additional data to the plot</h2>

<p>Once you have created a plot, you can <a>add additional data to it</a>. You achieve this by adding a new <a>DataSet</a> with the data you want displayed.</p>

<pre><code> auto_twiddle(0);
 my $plot = hist_plot(grandom(100));
 
 # Add a Gaussian curve that &quot;fits&quot; the data
 use PDL::Constants qw(PI);
 my $fit_xs = zeroes(100)-&gt;xlinvals(-2, 2);
 my $fit_ys = exp(-$fit_xs**2 / 2) / sqrt(2*PI);
 $plot-&gt;dataSets-&gt;{fit_curve} = ds::Pair($fit_xs, $fit_ys);
 
 twiddle();</code></pre>

<p>The default <a>plot type</a> for <a>pairwise data</a> is <a>Diamonds</a>. You can choose a <a>different pairwise plot type</a>, or even mix and match <a>multiple pairwise plot types</a>.</p>

<pre><code> auto_twiddle(0);
 my $plot = hist_plot(grandom(100));
 
 # Add a Gaussian curve that &quot;fits&quot; the data
 use PDL::Constants qw(PI);
 my $fit_xs = zeroes(200)-&gt;xlinvals(-5, 5);
 my $fit_ys = exp(-$fit_xs**2 / 2) / sqrt(2*PI);
 $plot-&gt;dataSets-&gt;{fit_curve} = ds::Pair($fit_xs, $fit_ys,
     # Use lines
     plotTypes =&gt; [
         ppair::Lines(
             # with a thickness of three pixels
             lineWidth =&gt; 3,
             # And the color red
             color =&gt; cl::LightRed,
         ),
         ppair::Diamonds,
     ],
 );
 
 twiddle();</code></pre>

<h2 id="The-plot-command">The plot command</h2>

<p>If you want to specify everything in one command, you can use the plot function. This lets you put everything together that we&#39;ve already discussed, including multiple DataSets in a single command, title specification, and x and y axis options.</p>

<pre><code> # Generate some data:
 my $xs = sequence(100)/10 + 0.1;
 my $ys = $xs-&gt;sin + $xs-&gt;grandom / 10;
 my $y_err = $ys-&gt;grandom/10;
 
 # Plot the data and the fit
 plot(
     -data =&gt; ds::Pair($xs, $ys,
         plotTypes =&gt; [
             ppair::Triangles(filled =&gt; 1),
             ppair::ErrorBars(y_err =&gt; $y_err),
         ],
     ),
     -fit  =&gt; ds::Func(\&amp;PDL::sin,
         lineWidth =&gt; 3,
         color =&gt; cl::LightRed,
     ),
     -note =&gt; ds::Note(
         pnote::Text(&#39;Incoming Signal&#39;,
             x =&gt; 0.2,
             y =&gt; sin(0.2) . &#39;-3em&#39;,
         ),
     ),
     title =&gt; &#39;Noisey Sine Wave&#39;,
     x =&gt; {
         label =&gt; &#39;Time [s]&#39;,
         scaling =&gt; sc::Log,
     },
     y =&gt; { label =&gt; &#39;Measurement [Amp]&#39; },
 );</code></pre>

<h2 id="Enjoy-PDL::Graphics::Prima">Enjoy PDL::Graphics::Prima!</h2>

<p>I hope you&#39;ve enjoyed the tour, and I hope you find <a>PDL::Graphics::Prima</a> to be a useful plotting tool!</p>

<pre><code> # Thanks!</code></pre>

<h1 id="AUTHOR">AUTHOR</h1>

<p>David Mertens <code>dcmertens.perl@gmail.com</code></p>

<h1 id="LICENSE-AND-COPYRIGHT">LICENSE AND COPYRIGHT</h1>

<p>Copyright (c) 2013, David Mertens. All righs reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See <a>perlartistic</a>.</p>


</body>

</html>


