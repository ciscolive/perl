.\" Automatically generated by Pod::Man 4.14 (Pod::Simple 3.40)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "Net::DBus::Test::MockObject 3"
.TH Net::DBus::Test::MockObject 3 "2019-02-12" "perl v5.32.0" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
Net::DBus::Test::MockObject \- Fake an object from the bus for unit testing
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
.Vb 2
\&  use Net::DBus;
\&  use Net::DBus::Test::MockObject;
\&
\&  my $bus = Net::DBus\->test
\&
\&  # Lets fake presence of HAL...
\&
\&  # First we need to define the service
\&  my $service = $bus\->export_service("org.freedesktop.Hal");
\&
\&  # Then create a mock object
\&  my $object = Net::DBus::Test::MockObject\->new($service,
\&                                                "/org/freedesktop/Hal/Manager");
\&
\&  # Fake the \*(AqGetAllDevices\*(Aq method
\&  $object\->seed_action("org.freedesktop.Hal.Manager",
\&                       "GetAllDevices",
\&                       reply => {
\&                         return => [ "/org/freedesktop/Hal/devices/computer_i8042_Aux_Port",
\&                                     "/org/freedesktop/Hal/devices/computer_i8042_Aux_Port_logicaldev_input",
\&                                     "/org/freedesktop/Hal/devices/computer_i8042_Kbd_Port",
\&                                     "/org/freedesktop/Hal/devices/computer_i8042_Kbd_Port_logicaldev_input"
\&                         ],
\&                       });
\&
\&
\&  # Now can test any class which calls out to \*(AqGetAllDevices\*(Aq in HAL
\&  ....test stuff....
.Ve
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This provides an alternate for Net::DBus::Object to enable bus
objects to be quickly mocked up, thus facilitating creation of unit
tests for services which may need to call out to objects provided
by 3rd party services on the bus. It is typically used as a companion
to the Net::DBus::MockBus object, to enable complex services to
be tested without actually starting a real bus.
.PP
!!!!! \s-1WARNING\s0 !!!
.PP
This object & its APIs should be considered very experimental at
this point in time, and no guarantees about future \s-1API\s0 compatibility
are provided what-so-ever. Comments & suggestions on how to evolve
this framework are, however, welcome & encouraged.
.SH "METHODS"
.IX Header "METHODS"
.ie n .IP "my $object = Net::DBus::Test::MockObject\->new($service, $path, $interface);" 4
.el .IP "my \f(CW$object\fR = Net::DBus::Test::MockObject\->new($service, \f(CW$path\fR, \f(CW$interface\fR);" 4
.IX Item "my $object = Net::DBus::Test::MockObject->new($service, $path, $interface);"
Create a new mock object, attaching to the service defined by the \f(CW$service\fR
parameter. This would be an instance of the Net::DBus::Service object. The
\&\f(CW$path\fR parameter defines the object path at which to attach this mock object,
and \f(CW$interface\fR defines the interface it will support.
.ie n .IP "my $service = $object\->get_service" 4
.el .IP "my \f(CW$service\fR = \f(CW$object\fR\->get_service" 4
.IX Item "my $service = $object->get_service"
Retrieves the Net::DBus::Service object within which this
object is exported.
.ie n .IP "my $path = $object\->get_object_path" 4
.el .IP "my \f(CW$path\fR = \f(CW$object\fR\->get_object_path" 4
.IX Item "my $path = $object->get_object_path"
Retrieves the path under which this object is exported
.ie n .IP "my $msg = $object\->get_last_message" 4
.el .IP "my \f(CW$msg\fR = \f(CW$object\fR\->get_last_message" 4
.IX Item "my $msg = $object->get_last_message"
Retrieves the last message processed by this object. The returned
object is an instance of Net::DBus::Binding::Message
.ie n .IP "my $sig = $object\->get_last_message_signature" 4
.el .IP "my \f(CW$sig\fR = \f(CW$object\fR\->get_last_message_signature" 4
.IX Item "my $sig = $object->get_last_message_signature"
Retrieves the type signature of the last processed message.
.ie n .IP "my $value = $object\->get_last_message_param" 4
.el .IP "my \f(CW$value\fR = \f(CW$object\fR\->get_last_message_param" 4
.IX Item "my $value = $object->get_last_message_param"
Returns the first value supplied as an argument to the last
processed message.
.ie n .IP "my @values = $object\->get_last_message_param_list" 4
.el .IP "my \f(CW@values\fR = \f(CW$object\fR\->get_last_message_param_list" 4
.IX Item "my @values = $object->get_last_message_param_list"
Returns a list of all the values supplied as arguments to
the last processed message.
.ie n .IP "$object\->seed_action($interface, $method, %action);" 4
.el .IP "\f(CW$object\fR\->seed_action($interface, \f(CW$method\fR, \f(CW%action\fR);" 4
.IX Item "$object->seed_action($interface, $method, %action);"
Registers an action to be performed when a message corresponding
to the method \f(CW$method\fR within the interface \f(CW$interface\fR is
received. The \f(CW%action\fR parameter can have a number of possible
keys set:
.RS 4
.IP "signals" 4
.IX Item "signals"
Causes a signal to be emitted when the method is invoked. The
value associated with this key should be an instance of the
Net::DBus::Binding::Message::Signal class.
.IP "error" 4
.IX Item "error"
Causes an error to be generated when the method is invoked. The
value associated with this key should be a hash reference, with
two elements. The first, \f(CW\*(C`name\*(C'\fR, giving the error name, and the
second, \f(CW\*(C`description\*(C'\fR, providing the descriptive text.
.IP "reply" 4
.IX Item "reply"
Causes a normal method return to be generated. The value associated
with this key should be an array reference, whose elements are the
values to be returned by the method.
.RE
.RS 4
.RE
.SH "BUGS"
.IX Header "BUGS"
It doesn't completely replicate the \s-1API\s0 of Net::DBus::Binding::Object,
merely enough to make the high level bindings work in a test scenario.
.SH "AUTHOR"
.IX Header "AUTHOR"
Daniel P. Berrange
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (C) 2004\-2009 Daniel P. Berrange
.SH "SEE ALSO"
.IX Header "SEE ALSO"
Net::DBus, Net::DBus::Object, Net::DBus::Test::MockConnection,
<http://www.mockobjects.com/Faq.html>
