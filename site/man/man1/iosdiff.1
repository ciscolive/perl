.\" Automatically generated by Pod::Man 4.14 (Pod::Simple 3.40)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "IOSDIFF 1"
.TH IOSDIFF 1 "2016-06-17" "perl v5.32.0" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
iosdiff \- Cisco IOS Config Diff Utility
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
.Vb 1
\& $> iosdiff 192.0.2.1 192.0.2.1.new
\&
\& ~~~ Config diff for device 192.0.2.1
\& ===================================================================
\& \- snmp\-server enable traps ccme
\& + snmp\-server enable traps srst
.Ve
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \f(CW\*(C`iosdiff\*(C'\fR program will intelligently diff two files which are in Cisco
IOS-style configuration file format.
.PP
Whilst an ordinary diff works on IOS-style configuration files, it doesn't
show the context in a useful way. For example if one line changes within an
interface configuration, you're likely not to see the interface name in a
standard 3\-line contextual diff. This program improves that by showing the
full context of any difference.
.PP
In terms of IOS-style configuration, this context means either the \*(L"section\*(R"
such as an interface or class-map (a header with indented lines), or the
command group such as an access control list, where the lines share common
leading text.
.SH "USAGE"
.IX Header "USAGE"
The \f(CW\*(C`iosdiff\*(C'\fR command takes only two arguments, which are the names of the
two files to diff.
.PP
.Vb 1
\& $> iosdiff from\-this\-file to\-this\-file
.Ve
.PP
Lines in the files which are comments (begin with "\f(CW\*(C`!\*(C'\fR") will be stripped
from the file before the comparison is made.
.SS "Options"
.IX Subsection "Options"
.ie n .IP """\-B""" 4
.el .IP "\f(CW\-B\fR" 4
.IX Item "-B"
Use this option to \fIsuppress\fR the banner which is printed before the diff
output. Of course, no banner is printed anyway if there's no difference
between the two files being compared. The banner looks like:
.Sp
.Vb 2
\& ~~~ Config diff for device 192.0.2.1
\& ===================================================================
.Ve
.Sp
The device name in the banner depends on the name of the \*(L"right hand\*(R" file
provided for comparison (that is, the second file name passed in the command
line arguments). If there's an \s-1IP\s0 in the file name, it is resolved to a host
name using the \s-1DNS\s0 and printed. Otherwise the \s-1IP\s0 is used, but if there's no \s-1IP\s0
then the file name itself is used.
.Sp
.Vb 1
\& $> iosdiff \-B from\-this\-file to\-this\-file
.Ve
.SH "CONFIGURATION"
.IX Header "CONFIGURATION"
You can provide a file with a list of devices to ignore. If the device having
its configuration diffed is mentioned in the file, the program exits silently.
.PP
The name of the device is the \*(L"right hand\*(R" file provided for comparison (that
is, the second file name passed in the command line arguments). For \s-1RANCID,\s0
not that this will probably have a suffix of "\f(CW\*(C`.new\*(C'\fR".
.PP
The file used for this list is \f(CW\*(C`/etc/iosdiff\-ignore\*(C'\fR. Patches are welcome to
make this feature smarter. Its contents should be one name per line, only.
.SH "RANCID INTEGRATION"
.IX Header "RANCID INTEGRATION"
If you use \s-1RANCID\s0 with Subversion, edit the \s-1RANCID\s0 user's
\&\f(CW\*(C`~/.subversion/config\*(C'\fR to contain the following line:
.PP
.Vb 1
\& diff\-cmd=iosdiff
.Ve
.PP
The effect will be that this program is called instead of the system diff
utility, and smarter output produced in email notices.
.SH "CAVEATS"
.IX Header "CAVEATS"
.SS "\s-1RANCID\s0"
.IX Subsection "RANCID"
Unfortunately where the difference between files is within the comments lines,
\&\s-1RANCID\s0 will emit a notice about the difference, but you'll get nothing more.
That's because comments are ignored by this program. The fix would be to patch
\&\s-1RANCID\s0 to spot when the diff program emits no output.
.PP
Also, if you use \s-1RANCID\s0 for devices which do not save IOS-style configuration
files, then setting \f(CW\*(C`diff\-cmd=iosdiff\*(C'\fR will probably not be as useful. There
is no workaround, as it's a global setting for \s-1RANCID.\s0
.ie n .SS "Use with ""patch"" Utility"
.el .SS "Use with \f(CWpatch\fP Utility"
.IX Subsection "Use with patch Utility"
The contextual diff output produced by this program is not suitable as input
to the \f(CW\*(C`patch\*(C'\fR utility.
.SH "AUTHOR"
.IX Header "AUTHOR"
Oliver Gorwits <oliver@cpan.org>
.SH "COPYRIGHT AND LICENSE"
.IX Header "COPYRIGHT AND LICENSE"
This software is copyright (c) 2016 by University of Oxford.
.PP
This is free software; you can redistribute it and/or modify it under
the same terms as the Perl 5 programming language system itself.
